let symbols=["🍬","🎃","🔔","🪦","🦇","🧛"],paylines=[[0,0,0,0,0],[1,1,1,1,1],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[0,0,1,2,6],[2,2,1,0,0],[0,1,1,1,0],[2,1,1,1,2],[1,0,0,0,1],[1,2,2,2,1],[0,1,2,2,1],[2,1,0,0,1],[0,0,2,2,0],[2,2,0,0,2],[1,0,1,2,1],[1,2,1,0,1],[0,2,2,1,0],[2,0,0,1,2],[1,1,0,2,1],[2,0,1,0,2],[0,2,1,2,0],[1,1,2,0,1],[1,2,0,1,1],[2,1,2,1,0]];async function createAudit(e){await(await fetch("http://localhost:4000/user/create_audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:user._id,info:e,balance:balance})})).json()}document.querySelector(".no-balance-model-parent .overlay").addEventListener("click",function(){gsap.to(".no-balance-model-parent",{opacity:0,ease:"power4.inOut",onComplete:()=>{document.querySelector(".no-balance-model-parent").style.display="none"}})}),document.querySelector(".welcome-container").addEventListener("click",function(){document.querySelector("#spookyAudio").play(),gsap.to(".welcome-container",{height:0,opacity:0,ease:"power4.inOut",onComplete:()=>{document.querySelector(".game-container").style.display="block",gsap.to(".game-container",{opacity:1,ease:"power4.inOut"})}})});let isSpinning=!1;function spinReels(){if(console.log("spinReeles"),gsap.to(".win-container",{height:0,opacity:1}),!isSpinning){isSpinning=!0,document.querySelectorAll(".reel div").forEach(e=>{e.style.backgroundColor="#444",e.style.animationPlayState="paused"});let n=parseInt(document.getElementById("bet").value),a=parseInt(document.getElementById("paylines").value);var e=n*a;if(e>balance)document.querySelector(".no-balance-model-parent").style.display="block",gsap.to(".no-balance-model-parent",{opacity:1,ease:"power4.inOut",onComplete:()=>isSpinning=!1});else{balance-=e,createAudit(`You used ${n} Berperline and ${a} Payline.`),localStorage.setItem("user",JSON.stringify({...user,balance:balance})),updateBalance();let t=[...Array(5)].map(()=>[...Array(3)].map(()=>symbols[Math.floor(Math.random()*symbols.length)]));displayReels(t),gsap.from(".reel div",{duration:2,y:-200,onComplete:()=>{var e=checkWins(t,a,n);balance+=e,localStorage.setItem("user",JSON.stringify({...user,balance:balance})),updateBalance(),isSpinning=!1}})}}}function displayReels(t){t.forEach((e,t)=>{let n=document.getElementById("reel"+(t+1));n.innerHTML="",e.forEach(e=>{var t=document.createElement("div");t.textContent=e,n.appendChild(t)})});for(let e=0;e<2;e++)t.forEach((e,t)=>{let n=document.getElementById("reel"+(t+1));e.forEach(e=>{var t=document.createElement("div");t.textContent=e,n.appendChild(t)})})}function checkWins(t,n,o){let l=0;for(let e=0;e<n;e++){let n=paylines[e],a=t[0][n[0]];t.every((e,t)=>e[n[t]]===a)&&(n.forEach((e,t)=>{document.querySelectorAll(`#reel${t+1} div`)[e].style.animationPlayState="running",gsap.to(".win-container",{height:"auto",opacity:1});t=document.getElementById("thunderAudio");t.currentTime=0,t.play()}),createAudit(`You won ${l}.`),l+=5*o)}return l}document.getElementById("spin").addEventListener("click",spinReels);